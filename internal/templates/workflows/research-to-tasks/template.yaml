registry:
  # Research to Tasks Workflow - Translate research docs into beads epics/tasks
  - namespace: "workflow"
    key: "research-to-tasks"
    version: "v1"
    name: "Research to Tasks"
    description: "Translate research documents into well-planned beads epics and tasks with multi-perspective review. Uses 4 workers: Task Writer, Implementation Reviewer, Test Reviewer, and Mediator."
    template: "v1-research-to-tasks-epic.md"
    instructions: "v1-epic-instructions.md"
    labels:
      - "category:task-planning"
    nodes:
      # Phase 1: Mediator creates plan document
      - key: "setup"
        name: "Setup"
        assignee: "worker-4"
        template: "v1-research-to-tasks-setup.md"
        outputs:
          - key: "plan"
            file: "plan.md"

      # Phase 2: Task Writer creates epic and tasks
      - key: "task-breakdown"
        name: "Initial Task Breakdown"
        assignee: "worker-1"
        template: "v1-research-to-tasks-breakdown.md"
        inputs:
          - key: "plan"
            file: "plan.md"
        after:
          - "setup"

      # Phase 3: Implementation Reviewer reviews
      - key: "impl-review"
        name: "Implementation Review"
        assignee: "worker-2"
        template: "v1-research-to-tasks-impl-review.md"
        inputs:
          - key: "plan"
            file: "plan.md"
        after:
          - "task-breakdown"

      # Phase 4: Test Reviewer reviews
      - key: "test-review"
        name: "Test Review"
        assignee: "worker-3"
        template: "v1-research-to-tasks-test-review.md"
        inputs:
          - key: "plan"
            file: "plan.md"
        after:
          - "impl-review"

      # Phase 5: Task Writer addresses feedback (conditional - handled in template)
      - key: "revisions"
        name: "Incorporate Feedback"
        assignee: "worker-1"
        template: "v1-research-to-tasks-revisions.md"
        inputs:
          - key: "plan"
            file: "plan.md"
        after:
          - "test-review"

      # Phase 6a: Implementation Reviewer final approval
      - key: "impl-final"
        name: "Implementation Final Review"
        assignee: "worker-2"
        template: "v1-research-to-tasks-final-review.md"
        inputs:
          - key: "plan"
            file: "plan.md"
        after:
          - "revisions"

      # Phase 6b: Test Reviewer final approval (after impl-final)
      - key: "test-final"
        name: "Test Final Review"
        assignee: "worker-3"
        template: "v1-research-to-tasks-final-review.md"
        inputs:
          - key: "plan"
            file: "plan.md"
        after:
          - "impl-final"

      # Phase 7: Mediator writes summary
      - key: "summary"
        name: "Final Summary"
        assignee: "worker-4"
        template: "v1-research-to-tasks-summary.md"
        inputs:
          - key: "plan"
            file: "plan.md"
        after:
          - "test-final"
